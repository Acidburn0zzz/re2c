===========
Release 1.0
===========

*by Ulya Trofimovich*

This release is an important milestone in the history of re2c: it adds *submatch extraction*.
It is a long-awaited feature; even as Peter Bumbulis released the first version of re2c back in 1993,
he mentioned submatch extraction in his paper together with Donald D. Cowan
:download:`"RE2C: a more versatile scanner generator" <../../about/1994_bumbulis_cowan_re2c_a_more_versatile_scanner_generator.pdf>`
as a useful feature that soon should be added to re2c.
It seemed back then that submatch extraction is relatively easy to implement;
like many other useful extensions, it was deemed to be no more than syntactic sugar on top of canonical regular expressions.

As it turned out, this is not so:
the problem of *parsing* with regular expressions is inherently more complex than *recognition*,
and submatch extraction cannot be implemented using traditional DFA-based approach.
Many authors studied this subject and developed algorithms suitable for their particular settings and problem domains.
Some of them used NFA-based approach,
others suggested algorithms based on multiple DFA or multiple passes over a single DFA.
For re2c most of these algorithms are too heavyweight:
they require complication of the underlying computational model and incur overhead even in simple cases.

However, one algorithm is outstanding in this respect:
it is the algorithm invented by Ville Laurikari in 2000 and described in his paper 
`"NFAs with Tagged Transitions, their Conversion to Deterministic Automata and Application to Regular Expressions"
<http://laurikari.net/ville/spire2000-tnfa.pdf>`_.
Laurikari algorithm is based on a single DFA extended with a fixed number of *registers*; it makes one pass over the input string,
works in linear time and the required space does not depend on the input length.
But what is most important, the added complexity depends on submatch detalization:
on submatch-free regular expressions Laurikari automaton reduces to a simple DFA.

As I started working on the implementation of submatch extraction in re2c (in early 2016),
at first I didn't appreciate the elegance of Laurikari approach; it still seemed overly complicated for re2c.
I studied many papers and tried to invent an algorithm that would support only *partial* submatch extraction,
but the supported cases would be handled very efficiently.
As I developed the algorithm, I came to realize that it was in fact but a special case of Laurikari algorithm.
Naturally, I turned back to the original paper and started to adapt my implementation.
To my surprise, I discovered a strange deficiency in Laurikari algorithm compared to my early implementation:
when recording submatches, Laurikari automata totally ignore the lookahead symbol
and perform a lot of redundant operations that could be easily avoided.
It was only logical to fix Laurikari algorithm;
but as I worked on it, a couple of other issues showed up,
and so it happened that I ended up writing a whole paper on the subject:
:download:`"Tagged Deterministic Finite Automata with Lookahead" <../../about/2017_trofimovich_tagged_deterministic_finite_automata_with_lookahead.pdf>`.

Submatch extraction in re2c comes in two flavors:
POSIX-compliant capturing groups (with true POSIX semantics)
and standalone *tags* that use leftmost greedy disambiguation.
Both features require a number of new API primitives and configurations;
and they are barely documented yet (though I managed to add a `section <../../manual/features/submatch/submatch.html>`_ in the manual).
The paper cited above has some interesting benchmark results;
articles and examples will follow in the nearest future.
As usually, you may expect a number of small bug-fix releases in the 1.0.x series.

The following people contributed to this release:

* Petr Skocik tidied up re2c documentation: fixed ubiquitous spelling errors
  and established synchronization system between the online documentation,
  manpage and help message displayed by re2c with ``--help`` option.

* Sergei Trofimovich wrote a *fuzzer* that generates random regular expressions
  and checks them on input data generated with re2c ``--skeleton`` option.
  This fuzzer is most helpful; it has already found tens of bugs in the early implementation of submatch extraction.
  Sergei also helped me with testing re2c on numerous platforms and computer architectures.

* Abs62,
  asmwarrior,
  Ben Smith,
  CRCinAU,
  Derick Rethans,
  Dimitri John Ledkov,
  Eldar Zakirov,
  jcfp,
  Jean-Claude Wippler,
  Jeff Trull,
  Jérôme Dumesnil,
  Jesse Buesking,
  Julian Andres Klode,
  Paulo Custodio,
  Perry E. Metzger,
  philippschaefer,
  Ross Burton,
  Rui Maciel,
  Ryan Mast,
  Samuel006,
  sirzooro,
  Tim Kelly
  --- all these people contributed bug reports, patches and feedback. Thank you!

* Many thanks to the early user of the new features João Paredes for his patience and encouraging comments on the subject.

Below is a coarse list of all changes (a raw excerpt from `changelog <../changelog/changelog.html>`_):

.. include:: ../changelog/1_0_list.rst


