
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Release 0.15 &#8212; re2c 1.0.2 documentation</title>
    <link rel="stylesheet" href="../../_static/theme-re2c.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="alternate" type="application/atom+xml" href="../../feed/atom.xml" title="Atom 1.0" />
    
 
  </head>
  <body>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="re2c-logo">
    re2c-1.0.2
</div>

<h3><a href="../../index.html">Home</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manual/manual.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../news.html">News</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_0_2.html">Release 1.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_0_1.html">Release 1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_0.html">Release 1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_16.html">Release 0.16</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_15_3.html">Release 0.15.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_15_2.html">Release 0.15.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_15_1.html">Release 0.15.1</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Release 0.15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog.html">Changelog</a></li>
</ul>
</li>
</ul>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="release-0-15">
<h1>Release 0.15<a class="headerlink" href="#release-0-15" title="Permalink to this headline">¶</a></h1>
<p>This release started out in the spring of 2015 as a relatively simple code cleanup.</p>
<p>I focused on the following problem: re2c used to repeat the whole generation process multiple times.
Some parts of the generated program depend on the overall input statistics;
they cannot be generated until the whole input has been processed.
The usual strategy is to make stubs for all such things and fix them later.
Instead, re2c used to process the whole input, gather statistics,
discard the generated output, and regenerate it from scratch.
Moreover, each generation pass further duplicated certain calculations (for similar reasons).
As a result, the code generation phase was repeated four times.</p>
<p>The problem here is not inefficiency: re2c is fast enough to allow the 4x overhead.
The real problem is the complexity of the code: you have to think of multiple execution layers all the time.
Some parts of code are only executed on certain layers and affect each other.
Simple reasoning gets really hard.</p>
<p>So the main purpose of this release was to simplify the code and make it easier to fix bugs and add new features.
However, very soon I realized that some of the changes in code generation are hard to verify by hand.
For example, even a minor rebalancing of <code class="docutils literal"><span class="pre">if</span></code> and <code class="docutils literal"><span class="pre">switch</span></code> statements
may change the generated code significantly.
In search of an automatic verification tool, I encountered the idea of generating <a class="reference external" href="../../manual/features/skeleton/skeleton.html">skeleton</a> programs.</p>
<p>Meanwhile I just couldn’t help adding <a class="reference external" href="../../manual/warnings/warnings.html">warnings</a>,
updating the build system, and fixing various bugs.
A heart-warming consequence of the code simplification is that re2c now uses re2c more extensively:
not only the main program, but also the command-line options, inplace configurations,
and all kinds of escaped strings are parsed with re2c.
I also updated the website (feel free to suggest improvements).</p>
<p>Here is the list of all the changes:</p>
<ul>
<li><dl class="first docutils">
<dt>Updated website <a class="reference external" href="http://re2c.org">http://re2c.org</a>:</dt>
<dd><ul class="first last simple">
<li>added examples</li>
<li>updated docs</li>
<li>added news</li>
<li>added web feed (Atom 1.0)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added options:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">-S,</span> <span class="pre">--skeleton</span></code></li>
<li><code class="docutils literal"><span class="pre">--empty-class</span> <span class="pre">&lt;match-empty</span> <span class="pre">|</span> <span class="pre">match-none</span> <span class="pre">|</span> <span class="pre">error&gt;</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added warnings:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">-W</span></code></li>
<li><code class="docutils literal"><span class="pre">-Werror</span></code></li>
<li><code class="docutils literal"><span class="pre">-W&lt;warning&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wno-&lt;warning&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">-Werror-&lt;warning&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wno-error-&lt;warning&gt;</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added specific warnings:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">-Wundefined-control-flow</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wunreachable-rules</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wcondition-order</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wuseless-escape</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wempty-character-class</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wswapped-range</span></code></li>
<li><code class="docutils literal"><span class="pre">-Wmatch-empty-string</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Fixed options:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">--</span></code> (interpret remaining arguments as non-options)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Deprecated options:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">-1</span> <span class="pre">--single-pass</span></code> (single pass is the default now)</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Reduced size of the generated <code class="docutils literal"><span class="pre">.dot</span></code> files.</p>
</li>
<li><dl class="first docutils">
<dt>Fixed bugs:</dt>
<dd><ul class="first last simple">
<li>#27 re2c crashes reading files containing <code class="docutils literal"><span class="pre">%{</span> <span class="pre">%}</span></code> (patch by Rui)</li>
<li>#51 default rule doesn’t work in reuse mode</li>
<li>#52 eliminate multiple passes</li>
<li>#59 bogus <code class="docutils literal"><span class="pre">yyaccept</span></code> in <code class="docutils literal"><span class="pre">-c</span></code> mode</li>
<li>#60 redundant use of <code class="docutils literal"><span class="pre">YYMARKER</span></code></li>
<li>#61 empty character class <code class="docutils literal"><span class="pre">[]</span></code> matches empty string</li>
<li>#115 flex-style named definitions cause ambiguity in re2c grammar</li>
<li>#119 <code class="docutils literal"><span class="pre">-f</span></code> with <code class="docutils literal"><span class="pre">-b</span></code>/<code class="docutils literal"><span class="pre">-g</span></code> generates incorrect dispatch on fill labels</li>
<li>#116 empty string with non-empty trailing context consumes code units</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added test options:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">-j</span></code>, <code class="docutils literal"><span class="pre">-j</span> <span class="pre">&lt;N&gt;</span></code> (run tests in <code class="docutils literal"><span class="pre">N</span></code> threads, defaults to the number of CPUs)</li>
<li><code class="docutils literal"><span class="pre">--wine</span></code> (test windows builds using <code class="docutils literal"><span class="pre">wine</span></code>)</li>
<li><code class="docutils literal"><span class="pre">--skeleton</span></code> (generate skeleton programs, compile and execute them)</li>
<li><code class="docutils literal"><span class="pre">--keep-tmp-files</span></code> (don’t delete intermediate files for successful tests)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Updated build system:</dt>
<dd><ul class="first last simple">
<li>support out of source builds</li>
<li>support <code class="docutils literal"><span class="pre">`make</span> <span class="pre">distcheck`</span></code></li>
<li>added <code class="docutils literal"><span class="pre">`make</span> <span class="pre">bootstrap`</span></code> (rebuild re2c after building with precompiled <code class="docutils literal"><span class="pre">.re</span></code> files)</li>
<li>added <code class="docutils literal"><span class="pre">`make</span> <span class="pre">tests`</span></code> (run tests with <code class="docutils literal"><span class="pre">-j</span></code>)</li>
<li>added <code class="docutils literal"><span class="pre">`make</span> <span class="pre">vtests`</span></code> (run tests with <code class="docutils literal"><span class="pre">--valgrind</span> <span class="pre">-j</span></code>)</li>
<li>added <code class="docutils literal"><span class="pre">`make</span> <span class="pre">wtests`</span></code> (run tests with <code class="docutils literal"><span class="pre">--wine</span> <span class="pre">-j</span> <span class="pre">1</span></code>)</li>
<li>added Autoconf tests for <code class="docutils literal"><span class="pre">CXXFLAGS</span></code>. By default try the following options:
<code class="docutils literal"><span class="pre">-W</span> <span class="pre">-Wall</span> <span class="pre">-Wextra</span> <span class="pre">-Weffc++</span> <span class="pre">-pedantic</span> <span class="pre">-Wformat=2</span> <span class="pre">-Wredundant-decls</span> <span class="pre">-Wsuggest-attribute=format</span> <span class="pre">-Wconversion</span> <span class="pre">-Wsign-conversion</span> <span class="pre">-O2</span> <span class="pre">-Weverything</span></code>),
respect user-defined <code class="docutils literal"><span class="pre">CXXFLAGS</span></code></li>
<li>support Mingw builds: <code class="docutils literal"><span class="pre">`configure</span> <span class="pre">-host</span> <span class="pre">i686-w64-mingw32`</span></code></li>
<li>structured source files</li>
<li>removed old MSVC files</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Moved development to github (<a class="reference external" href="https://github.com/skvadrik/re2c">https://github.com/skvadrik/re2c</a>), keep a mirror on sourceforge.</p>
</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      Last updated on Sep 14, 2017.
    </div>
  </body>
</html>