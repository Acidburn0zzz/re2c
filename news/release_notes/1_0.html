
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Release 1.0 &#8212; re2c 0.16 documentation</title>
    <link rel="stylesheet" href="../../_static/theme-re2c.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.16',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="alternate" type="application/atom+xml" href="../../feed/atom.xml" title="Atom 1.0" />
    
 
  </head>
  <body>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="re2c-logo">
    re2c-0.16
</div>

<h3><a href="../../index.html">Home</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manual/manual.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../news.html">News</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Release 1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_16.html">Release 0.16</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_15_3.html">Release 0.15.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_15_2.html">Release 0.15.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_15_1.html">Release 0.15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_15.html">Release 0.15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/changelog.html">Changelog</a></li>
</ul>
</li>
</ul>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="release-1-0">
<h1>Release 1.0<a class="headerlink" href="#release-1-0" title="Permalink to this headline">¶</a></h1>
<p><em>by Ulya Trofimovich</em></p>
<p>This release is an important milestone in the history of re2c: it adds <em>submatch extraction</em>.
It is a long-awaited feature; even as Peter Bumbulis released the first version of re2c back in 1993,
he mentioned submatch extraction in his paper together with Donald D. Cowan
<a class="reference download internal" href="../../_downloads/1994_bumbulis_cowan_re2c_a_more_versatile_scanner_generator.pdf" download=""><code class="xref download docutils literal"><span class="pre">&quot;RE2C:</span> <span class="pre">a</span> <span class="pre">more</span> <span class="pre">versatile</span> <span class="pre">scanner</span> <span class="pre">generator&quot;</span></code></a>
as a useful feature that soon should be added to re2c.
It seemed back then that submatch extraction is relatively easy to implement;
like many other useful extensions, it was deemed to be no more than syntactic sugar on top of canonical regular expressions.</p>
<p>As it turned out, this is not so:
the problem of <em>parsing</em> with regular expressions is inherently more complex than <em>recognition</em>,
and submatch extraction cannot be implemented using traditional DFA-based approach.
Many authors studied this subject and developed algorithms suitable for their particular settings and problem domains.
Some of them used NFA-based approach,
others suggested algorithms based on multiple DFA or multiple passes over a single DFA.
For re2c most of these algorithms are too heavyweight:
they require complication of the underlying computational model and incur overhead even in simple cases.</p>
<p>However, one algorithm is outstanding in this respect:
it is the algorithm invented by Ville Laurikari in 2000 and described in his paper
<a class="reference external" href="http://laurikari.net/ville/spire2000-tnfa.pdf">“NFAs with Tagged Transitions, their Conversion to Deterministic Automata and Application to Regular Expressions”</a>.
Laurikari algorithm is based on a single DFA extended with a fixed number of <em>registers</em>; it makes one pass over the input string,
works in linear time and the required space does not depend on the input length.
But what is most important, the added complexity depends on submatch detalization:
on submatch-free regular expressions Laurikari automaton reduces to a simple DFA.</p>
<p>As I started working on the implementation of submatch extraction in re2c (in early 2016),
at first I didn’t appreciate the elegance of Laurikari approach; it still seemed overly complicated for re2c.
I studied many papers and tried to invent an algorithm that would support only <em>partial</em> submatch extraction,
but the supported cases would be handled very efficiently.
As I developed the algorithm, I came to realize that it was in fact but a special case of Laurikari algorithm.
Naturally, I turned back to the original paper and started to adapt my implementation.
To my surprise, I discovered a strange deficiency in Laurikari algorithm compared to my early implementation:
when recording submatches, Laurikari automata totally ignore the lookahead symbol
and perform a lot of redundant operations that could be easily avoided.
It was only logical to fix Laurikari algorithm;
but as I worked on it, a couple of other issues showed up,
and so it happened that I ended up writing a whole paper on the subject:
<a class="reference download internal" href="../../_downloads/2017_trofimovich_tagged_deterministic_finite_automata_with_lookahead.pdf" download=""><code class="xref download docutils literal"><span class="pre">&quot;Tagged</span> <span class="pre">Deterministic</span> <span class="pre">Finite</span> <span class="pre">Automata</span> <span class="pre">with</span> <span class="pre">Lookahead&quot;</span></code></a>.</p>
<p>Submatch extraction in re2c comes in two flavors:
POSIX-compliant capturing groups (with true POSIX semantics)
and standalone <em>tags</em> that use leftmost greedy disambiguation.
Both features require a number of new API primitives and configurations;
and they are barely documented yet (though I managed to add a <a class="reference external" href="../../manual/features/submatch/submatch.html">section</a> in the manual).
The paper cited above has some interesting benchmark results;
articles and examples will follow in the nearest future.
As usually, you may expect a number of small bug-fix releases in the 1.0.x series.</p>
<p>The following people contributed to this release:</p>
<ul class="simple">
<li>Petr Skocik tidied up re2c documentation: fixed ubiquitous spelling errors
and established synchronization system between the online documentation,
manpage and help message displayed by re2c with <code class="docutils literal"><span class="pre">--help</span></code> option.</li>
<li>Sergei Trofimovich wrote a <em>fuzzer</em> that generates random regular expressions
and checks them on input data generated with re2c <code class="docutils literal"><span class="pre">--skeleton</span></code> option.
This fuzzer is most helpful; it has already found tens of bugs in the early implementation of submatch extraction.
Sergei also helped me with testing re2c on numerous platforms and computer architectures.</li>
<li>Abs62,
asmwarrior,
Ben Smith,
CRCinAU,
Derick Rethans,
Dimitri John Ledkov,
Eldar Zakirov,
jcfp,
Jean-Claude Wippler,
Jeff Trull,
Jérôme Dumesnil,
Jesse Buesking,
Julian Andres Klode,
Paulo Custodio,
Perry E. Metzger,
philippschaefer,
Ross Burton,
Rui Maciel,
Ryan Mast,
Samuel006,
sirzooro,
Tim Kelly
— all these people contributed bug reports, patches and feedback. Thank you!</li>
<li>Many thanks to the early user of the new features João Paredes for his patience and encouraging comments on the subject.</li>
</ul>
<p>Below is a coarse list of all changes (a raw excerpt from <a class="reference external" href="../changelog/changelog.html">changelog</a>):</p>
<ul>
<li><dl class="first docutils">
<dt>Added options:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">-P</span> <span class="pre">--posix-captures</span></code> (POSIX-compliant capturing groups)</li>
<li><code class="docutils literal"><span class="pre">-T</span> <span class="pre">--tags</span></code> (standalone tags with leftmost greedy disambiguation)</li>
<li><code class="docutils literal"><span class="pre">--no-lookahead</span></code></li>
<li><code class="docutils literal"><span class="pre">--no-optimize-tags</span></code></li>
<li><code class="docutils literal"><span class="pre">--eager-skip</span></code></li>
<li><code class="docutils literal"><span class="pre">--dump-nfa</span></code></li>
<li><code class="docutils literal"><span class="pre">--dump-dfa-raw</span></code></li>
<li><code class="docutils literal"><span class="pre">--dump-dfa-det</span></code></li>
<li><code class="docutils literal"><span class="pre">--dump-dfa-tagopt</span></code></li>
<li><code class="docutils literal"><span class="pre">--dump-dfa-min</span></code></li>
<li><code class="docutils literal"><span class="pre">--dump-adfa</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added new syntax:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">&#64;&lt;stag&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">#&lt;mtag&gt;</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added new directives:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">/*!stags:re2c</span> <span class="pre">...</span> <span class="pre">*/</span></code></li>
<li><code class="docutils literal"><span class="pre">/*!mtags:re2c</span> <span class="pre">...</span> <span class="pre">*/</span></code></li>
<li><code class="docutils literal"><span class="pre">/*!maxnmatch:re2c</span> <span class="pre">...</span> <span class="pre">*/</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added new API:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">YYSTAGN</span> <span class="pre">(t)</span></code></li>
<li><code class="docutils literal"><span class="pre">YYSTAGP</span> <span class="pre">(t)</span></code></li>
<li><code class="docutils literal"><span class="pre">YYMTAGN</span> <span class="pre">(t)</span></code></li>
<li><code class="docutils literal"><span class="pre">YYMTAGP</span> <span class="pre">(t)</span></code></li>
<li><code class="docutils literal"><span class="pre">YYRESTORETAG</span> <span class="pre">(t)</span></code></li>
<li><code class="docutils literal"><span class="pre">YYMAXNMATCH</span></code></li>
<li><code class="docutils literal"><span class="pre">yynmatch</span></code></li>
<li><code class="docutils literal"><span class="pre">yypmatch</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Added inplace confgurations:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">re2c:define:YYSTAGN</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:define:YYSTAGP</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:define:YYMTAGN</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:define:YYMTAGP</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:define:YYRESTORETAG</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:8</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:utf-8``</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:b</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:bit-vectors</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:case-insensitive</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:case-inverted</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:d</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:debug-output</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:dfa-minimization</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:eager-skip</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:e</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:ecb</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:empty-class</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:encoding-policy</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:g</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:computed-gotos</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:i</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:no-debug-info</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:input</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:lookahead</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:optimize-tags</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:P</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:posix-captures</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:s</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:nested-ifs</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:T</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:tags</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:u</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:unicode</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:w</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:wide-chars</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:flags:x</span></code> or <code class="docutils literal"><span class="pre">re2c:flags:utf-16</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:tags:expression</span></code></li>
<li><code class="docutils literal"><span class="pre">re2c:tags:prefix</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Added warning <code class="docutils literal"><span class="pre">-Wnondeterministic-tags</span></code></p>
</li>
<li><p class="first">Added fuzz-testing scripts</p>
</li>
<li><p class="first">Added paper “Tagged Deterministic Finite Automata with Lookahead”</p>
</li>
<li><dl class="first docutils">
<dt>Fixed bugs:</dt>
<dd><ul class="first last simple">
<li>#121 “trailing contexts are fundamentally broken”</li>
<li>#135 “In installation <code class="docutils literal"><span class="pre">make</span> <span class="pre">check</span></code> give syntax error”</li>
<li>#137 “run_tests.sh fail when running configure script with absolute path”</li>
<li>#138 “website improvement”</li>
<li>#141 “Tests under Windows”</li>
<li>#142 “segvault with null terminated input”</li>
<li>#145 “Values for enum YYCONDTYPE are not generated when default rules with conditions are used”</li>
<li>#147 “Please add symbol name to “can’t find symbol” error message”</li>
<li>#152 “Line number in #line directive after enum YYCONDTYPE is 0-based”</li>
<li>#156 “Build with Visual Studio 14 2015: symbol name conflict”</li>
<li>#158 “Inconsistent forward declaration of struct/class vs definition”</li>
<li>#160 “Open text files with “wb” causes issues on Windows”</li>
<li>#162 “Reading files with “rb” causes issues in Windows”</li>
<li>#165 “Trailing context consumed if initial expression matches it”</li>
<li>#176 “re2c help message is too wide for most terminals”</li>
<li>#184 “Small documentation issue”</li>
<li>#186 “Difference operator sometimes doesn’t work with utf-8”</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Merged pull requests:</dt>
<dd><ul class="first last simple">
<li>#131 “Use bash-specific <code class="docutils literal"><span class="pre">[[</span></code> builtin”</li>
<li>#136 “Added basic support for travis-ci.org integration”</li>
<li>#171 “Typo fix”</li>
<li>#172 “Grammar fixes in the docs”</li>
<li>#173 “Grammar fixes in the manpage”</li>
<li>#174 “more documentation fixes”</li>
<li>#175 “more manpage fixes”</li>
<li>#177 “sync –help output w/ manpage”</li>
<li>#178 “Moves rts used in the manpage to master”</li>
<li>#179 “compose manpage out of rsts from gh-pages-gen”</li>
<li>#189 “Typo fix and small grammatical change”</li>
<li>#191 “Makefile.am: create target directory before writing into it”</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      Last updated on Aug 12, 2017.
    </div>
  </body>
</html>